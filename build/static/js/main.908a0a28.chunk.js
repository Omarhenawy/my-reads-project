(this["webpackJsonpmyreads-app"]=this["webpackJsonpmyreads-app"]||[]).push([[0],{24:function(e,o,t){},31:function(e,o,t){},32:function(e,o,t){"use strict";t.r(o);var n=t(1),s=t(17),c=t.n(s),a=t(7),r=t(8),i=(t(24),t(11)),b="https://reactnd-books-api.udacity.com",l=localStorage.token;l||(l=localStorage.token=Math.random().toString(36).substr(-8));var j={Accept:"application/json",Authorization:l},h=t(2),d=t(18),u=t(0),O=function(){return Object(u.jsx)(a.b,{to:"/",children:Object(u.jsx)("button",{className:"close-search",children:"Close"})})},k=function(e){e.books;var o=e.search,t=(e.searchBooks,Object(n.useState)("")),s=Object(r.a)(t,2),c=s[0],a=s[1];return Object(u.jsx)("div",{className:"search-books-input-wrapper",children:Object(u.jsx)("input",{type:"text",placeholder:"Search by title or author",onChange:function(e){a(e.target.value),o(c)}})})},f=function(e){var o=e.books,t=e.onMove,n=e.search;return Object(u.jsxs)("div",{className:"search-books-bar",children:[Object(u.jsx)(O,{}),Object(u.jsx)(k,{books:o,onMove:{books:o,onMove:t},search:n})]})},v=function(e){var o=e.shelf,t=e.book,s=e.onMove,c=Object(n.useState)(o),a=Object(r.a)(c,2),i=a[0],b=a[1];return Object(u.jsx)("div",{className:"book-shelf-changer",children:Object(u.jsxs)("select",{value:i,onChange:function(e){b(e.target.value),s(t,e.target.value)},children:[Object(u.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(u.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(u.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(u.jsx)("option",{value:"read",children:"Read"}),Object(u.jsx)("option",{value:"none",children:"None"})]})})},x=function(e){var o=e.book,t=e.shelf,n=e.onMove;return Object(u.jsx)("li",{children:Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book-top",children:[Object(u.jsx)("div",{className:"book-cover",style:{width:128,height:192,backgroundImage:"url(".concat(o.imageLinks&&o.imageLinks.thumbnail,")")}}),Object(u.jsx)(v,{shelf:t,book:o,onMove:n})]}),Object(u.jsx)("div",{className:"book-title",children:o.title}),Object(u.jsx)("div",{className:"book-authors",children:o.authors&&o.authors.join(", ")})]})})},m=function(e){var o=e.searchedBooks,t=e.onMove,n=e.books;return o.map((function(e){return n.map((function(o){return o.id===e.id&&(e.shelf=o.shelf),o})),e})),Object(u.jsx)("div",{className:"search-books-results",children:Object(u.jsx)("ol",{className:"books-grid",children:o.map((function(e){return Object(u.jsx)(x,{book:e,shelf:e.shelf?e.shelf:"none",onMove:t},e.id)}))})})},p=function(e){var o=e.books,t=e.onMove,n=e.search,s=e.searchedBooks;return Object(u.jsxs)("div",{className:"search-books",children:[Object(u.jsx)(f,{books:o,search:n}),Object(u.jsx)(m,{books:o,onMove:t,searchedBooks:s})]})},y=function(e){var o=e.shelf,t=e.books,n=e.onMove,s=t.filter((function(e){return e.shelf===o.key}));return Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h2",{className:"bookshelf-title",children:o.name}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:s.map((function(e){return Object(u.jsx)(x,{book:e,shelf:o.key,onMove:n},e.id)}))})})]})},g=function(){return Object(u.jsx)("div",{className:"open-search",children:Object(u.jsx)(a.b,{to:"search",children:Object(u.jsx)("button",{children:"Add a book"})})})},N=function(e){var o=e.bookshelves,t=e.books,n=e.onMove;return Object(u.jsxs)("div",{className:"list-books",children:[Object(u.jsx)("div",{className:"list-books-title",children:Object(u.jsx)("h1",{children:"MyReads"})}),Object(u.jsx)("div",{className:"list-books-content",children:Object(u.jsxs)("div",{children:[o.map((function(e){return Object(u.jsx)(y,{shelf:e,books:t,onMove:n},e.key)})),";"]})}),Object(u.jsx)(g,{})]})},M=function(){var e=Object(n.useState)([]),o=Object(r.a)(e,2),t=o[0],s=o[1],c=Object(n.useState)([]),a=Object(r.a)(c,2),l=a[0],O=a[1];Object(n.useEffect)((function(){fetch("".concat(b,"/books"),{headers:j}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){s(e)}))}),[]);var k=Object(d.a)(200,!1,(function(e){e.length>0?function(e){return fetch("".concat(b,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},j),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(e).then((function(e){e.error?O([]):O(e)})):O([])})),f=function(e,o){!function(e,o){fetch("".concat(b,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)(Object(i.a)({},j),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:o})}).then((function(e){return e.json()}))}(e,o);var n=t.filter((function(o){return o.id!==e.id}));"none"!==o&&(e.shelf=o,n=n.concat(e)),s(n)};return Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)(h.a,{path:"/search",children:Object(u.jsx)(p,{searchedBooks:l,onMove:f,search:k,books:t})}),Object(u.jsx)(h.a,{exact:!0,path:"/",children:Object(u.jsx)(N,{bookshelves:[{key:"currentlyReading",name:"Currently Reading"},{key:"wantToRead",name:"Want to Read"},{key:"read",name:"Have Read"}],books:t,onMove:f})})]})};t(31);c.a.render(Object(u.jsx)(a.a,{children:Object(u.jsx)(M,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.908a0a28.chunk.js.map